<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒˆ è™¹éˆå¾¡æ‰€ï½œå…«å­—äººç”Ÿå…µæ³•ç³»çµ± - è³‡æ–™é©…å‹•ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            position: relative;
            overflow-x: hidden;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .description {
            font-size: 1rem;
            opacity: 0.8;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .content {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-weight: bold;
            color: #fff;
        }

        .input-group input, .input-group select {
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            backdrop-filter: blur(10px);
        }

        .input-group input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .results {
            margin-top: 30px;
        }

        .character-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .character-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .character-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4ecdc4;
        }

        .character-role {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .character-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .detail-section {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
        }

        .detail-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #4ecdc4;
        }

        .attributes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .attribute-item {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
        }

        .attribute-name {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .attribute-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4ecdc4;
        }

        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .skill-tag {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .story-section {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            border-left: 4px solid #4ecdc4;
        }

        .story-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #4ecdc4;
        }

        .story-content {
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .team-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-name {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4ecdc4;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }

            .character-header {
                flex-direction: column;
                gap: 10px;
            }

            .character-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <div class="logo">ğŸŒˆ</div>
            <h1 class="title">è™¹éˆå¾¡æ‰€</h1>
            <p class="subtitle">å…«å­—äººç”Ÿå…µæ³•ç³»çµ± - è³‡æ–™é©…å‹•ç‰ˆ</p>
            <p class="description">åŸºæ–¼å®Œæ•´è³‡æ–™åº«çš„æ™ºèƒ½å‘½ç†åˆ†æç³»çµ±</p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="input">
                ğŸ‘¤ è¼¸å…¥
            </div>
            <div class="tab" data-tab="team">
                ğŸ›¡ï¸ è»åœ˜
            </div>
            <div class="tab" data-tab="strategy">
                ğŸ“‹ æˆ°ç•¥
            </div>
            <div class="tab" data-tab="analysis">
                ğŸ“Š åˆ†æ
            </div>
        </div>

        <div class="content">
            <!-- è¼¸å…¥é é¢ -->
            <div id="input-content" class="tab-content">
                <h2>ğŸ¯ å‘½é‹è³‡æ–™è¼¸å…¥</h2>
                <p>è¼¸å…¥æº–ç¢ºçš„å‡ºç”Ÿæ™‚é–“ï¼Œé–‹å•Ÿä½ çš„å‘½é‹è»åœ˜ä¹‹æ—…</p>
                
                <div class="input-section">
                    <div class="input-group">
                        <label>å§“å</label>
                        <input type="text" id="name" placeholder="è«‹è¼¸å…¥å§“å">
                    </div>
                    <div class="input-group">
                        <label>å‡ºç”Ÿå¹´ä»½</label>
                        <input type="number" id="year" placeholder="ä¾‹å¦‚ï¼š1985">
                    </div>
                    <div class="input-group">
                        <label>å‡ºç”Ÿæœˆä»½</label>
                        <input type="number" id="month" placeholder="1-12" min="1" max="12">
                    </div>
                    <div class="input-group">
                        <label>å‡ºç”Ÿæ—¥æœŸ</label>
                        <input type="number" id="day" placeholder="1-31" min="1" max="31">
                    </div>
                    <div class="input-group">
                        <label>å‡ºç”Ÿæ™‚è¾°</label>
                        <input type="number" id="hour" placeholder="0-23" min="0" max="23">
                    </div>
                    <div class="input-group">
                        <label>å‡ºç”Ÿåˆ†é˜</label>
                        <input type="number" id="minute" placeholder="0-59" min="0" max="59">
                    </div>
                </div>

                <div class="input-group">
                    <label>å­æ™‚è¨ˆç®—æ–¹å¼</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="late-son" name="son-time" value="late" checked>
                            <label for="late-son">æ™šå­æ™‚ï¼ˆ23:00å¾Œç®—éš”å¤©ï¼‰</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="early-son" name="son-time" value="early">
                            <label for="early-son">æ—©å­æ™‚ï¼ˆ00:00ä¸æ›æ—¥ï¼‰</label>
                        </div>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-secondary" onclick="loadExample()">è¼‰å…¥ç¯„ä¾‹</button>
                    <button class="btn btn-primary" onclick="calculateBazi()">é–‹å§‹å‘½é‹åˆ†æ</button>
                </div>
            </div>

            <!-- è»åœ˜é é¢ -->
            <div id="team-content" class="tab-content hidden">
                <h2>ğŸ›¡ï¸ å››æ™‚è»åœ˜</h2>
                <p>ä½ çš„å°ˆå±¬å‘½é‹è»åœ˜é…ç½®</p>
                
                <div id="team-display">
                    <!-- è»åœ˜é¡¯ç¤ºå€åŸŸ -->
                </div>
            </div>

            <!-- æˆ°ç•¥é é¢ -->
            <div id="strategy-content" class="tab-content hidden">
                <h2>ğŸ“‹ äººç”Ÿæˆ°ç•¥</h2>
                <p>åŸºæ–¼å…«å­—åˆ†æçš„äººç”Ÿç™¼å±•å»ºè­°</p>
                
                <div id="strategy-display">
                    <!-- æˆ°ç•¥é¡¯ç¤ºå€åŸŸ -->
                </div>
            </div>

            <!-- åˆ†æé é¢ -->
            <div id="analysis-content" class="tab-content hidden">
                <h2>ğŸ“Š æ·±åº¦åˆ†æ</h2>
                <p>è©³ç´°çš„å‘½ç†åˆ†æå ±å‘Š</p>
                
                <div id="analysis-display">
                    <!-- åˆ†æé¡¯ç¤ºå€åŸŸ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // å®Œæ•´çš„è³‡æ–™åº«
        const DATABASE = {
            // é»˜é»˜è¶…çš„å®Œæ•´å‘½ç†æª”æ¡ˆ
            sampleData: {
                "basic_info": {
                    "å§“å": "é»˜é»˜è¶…ï¼ˆéš†ä¹¾é€ ï¼‰",
                    "æ€§åˆ¥": "ç”·",
                    "è¾²æ›†": "ä¸€ä¹å…«äº”å¹´å…«æœˆå»¿äºŒæˆŒæ™‚",
                    "ç”Ÿè‚–": "ç‰›",
                    "é™½æ›†": "1985-10-06 19:30:00",
                    "çœŸå¤ªé™½æ™‚": "1985-10-06 19:30:00",
                    "äººå…ƒå¸ä»¤åˆ†é‡": "è¾›é‡‘ç”¨äº‹",
                    "å‡ºç”Ÿç¯€æ°£": "å‡ºç”Ÿæ–¼ç™½éœ²å¾Œ28å¤©18å°æ™‚ï¼Œå¯’éœ²å‰1å¤©20å°æ™‚",
                    "ç™½éœ²": "1985å¹´09æœˆ08æ—¥ 00:53:00",
                    "å¯’éœ²": "1985å¹´10æœˆ08æ—¥ 16:24:32",
                    "æ˜Ÿåº§": "å¤©ç§¤åº§ï¼ˆLibraï¼‰",
                    "äºŒåå…«æ˜Ÿå®¿": "é¬¼å®¿å—æ–¹æœ±é›€",
                    "èƒå…ƒ": "ä¸™å­ï¼ˆæ¾—ä¸‹æ°´ï¼‰",
                    "ç©ºäº¡å¹´æ—¥": "æˆŒäº¥ï¼ˆç”³é…‰ï¼‰",
                    "å‘½å®®": "ä¸™æˆŒï¼ˆå±‹ä¸ŠåœŸï¼‰",
                    "èƒæ¯": "ç™¸äº¥ï¼ˆå¤§æµ·æ°´ï¼‰",
                    "èº«å®®": "ç”²ç”³ï¼ˆæ³‰ä¸­æ°´ï¼‰",
                    "å‘½å¦": "ä¹¾å¦ï¼ˆè¥¿å››å‘½ï¼‰"
                },
                "bazi_details": {
                    "å¹´æŸ±": {
                        "å¤©å¹²": "ä¹™",
                        "åœ°æ”¯": "ä¸‘",
                        "äº”è¡Œ": "æœ¨åœŸ",
                        "ç´éŸ³": "æµ·ä¸­é‡‘",
                        "åç¥": "åŠ«è²¡",
                        "è—å¹²": ["å·±åœŸ", "ç™¸æ°´", "è¾›é‡‘"],
                        "è—å¹²åç¥": ["æ­£è²¡", "å‚·å®˜", "å‚·å®˜"],
                        "æ˜Ÿé‹": "é¤Š",
                        "è‡ªå": "é¤Š",
                        "ç©ºäº¡": "æˆŒäº¥",
                        "ç¥ç…": ["å¤©ä¹™è²´äºº", "å¾·ç§€è²´äºº", "ç¦æ˜Ÿè²´äºº", "æœˆå¾·åˆ", "åœ‹å°"]
                    },
                    "æœˆæŸ±": {
                        "å¤©å¹²": "ä¹™",
                        "åœ°æ”¯": "é…‰",
                        "äº”è¡Œ": "æœ¨é‡‘",
                        "ç´éŸ³": "æ³‰ä¸­æ°´",
                        "åç¥": "åŠ«è²¡",
                        "è—å¹²": ["è¾›é‡‘"],
                        "è—å¹²åç¥": ["å‚·å®˜"],
                        "æ˜Ÿé‹": "æ­»",
                        "è‡ªå": "çµ•",
                        "ç©ºäº¡": "åˆæœª",
                        "ç¥ç…": ["å¾·ç§€è²´äºº", "æœˆå¾·åˆ", "å°‡æ˜Ÿ", "ç©ºäº¡"]
                    },
                    "æ—¥æŸ±": {
                        "å¤©å¹²": "æˆŠ",
                        "åœ°æ”¯": "å¯…",
                        "äº”è¡Œ": "åœŸæœ¨",
                        "ç´éŸ³": "åŸç‰†åœŸ",
                        "åç¥": "å…ƒç”·ï¼ˆæ—¥ä¸»ï¼‰",
                        "è—å¹²": ["ç”²æœ¨", "ä¸™ç«", "æˆŠåœŸ"],
                        "è—å¹²åç¥": ["ä¸ƒæ®º", "åå°", "æ¯”è‚©"],
                        "æ˜Ÿé‹": "é•·ç”Ÿ",
                        "è‡ªå": "é•·ç”Ÿ",
                        "ç©ºäº¡": "ç”³é…‰",
                        "ç¥ç…": ["å¤©å¾·è²´äºº", "è±å­å–œ", "ç´…é¸", "å¤©å", "å‹¾é™³"]
                    },
                    "æ™‚æŸ±": {
                        "å¤©å¹²": "å£¬",
                        "åœ°æ”¯": "æˆŒ",
                        "äº”è¡Œ": "æ°´åœŸ",
                        "ç´éŸ³": "å¤§æµ·æ°´",
                        "åç¥": "åè²¡",
                        "è—å¹²": ["æˆŠåœŸ", "ä¸ç«", "è¾›é‡‘"],
                        "è—å¹²åç¥": ["æ¯”è‚©", "æ­£å°", "å‚·å®˜"],
                        "æ˜Ÿé‹": "å† ",
                        "è‡ªå": "å† å¸¶",
                        "ç©ºäº¡": "å­ä¸‘",
                        "ç¥ç…": ["å¤©æ¥µè²´äºº", "è±å®®", "è¡€åˆƒ", "ç©ºäº¡", "æŠ«éº»"]
                    }
                },
                "character_team": {
                    "user_name": "é»˜é»˜è¶…",
                    "birth_info": "1985å¹´10æœˆ6æ—¥æˆŒæ™‚ï¼ˆå¤©ç§¤åº§ï¼‰",
                    "main_characters": [
                        {
                            "pillar": "å¹´æŸ±",
                            "role": "ä¸»å°‡",
                            "description": "é ˜å°çµ±å¾¡",
                            "element": "ä¹™ä¸‘",
                            "attributes": {
                                "é­…åŠ›": 3,
                                "çµ±å¾¡": 3,
                                "äººè„ˆ": 2
                            },
                            "skills": ["ç¤¾äº¤é”äºº", "è²´äººç›¸åŠ©", "åœ˜éšŠå‡èš"],
                            "background": "å¹´æŸ±ä¹™ä¸‘æµ·ä¸­é‡‘ï¼Œå¤©ä¹™è²´äººè­·æŒï¼Œå…·å‚™å¤©ç”Ÿçš„é ˜è¢–æ°£è³ªå’Œè²´äººé‹ã€‚æ“…é•·æ•´åˆè³‡æºï¼Œå¸¶é ˜åœ˜éšŠã€‚"
                        },
                        {
                            "pillar": "æœˆæŸ±",
                            "role": "è»å¸«",
                            "description": "æ™ºè¬€ç­–ç•¥",
                            "element": "ä¹™é…‰",
                            "attributes": {
                                "æ™ºåŠ›": 3,
                                "ç­–ç•¥": 3,
                                "åˆ†æ": 2
                            },
                            "skills": ["ç­–ç•¥åˆ¶å®š", "é¢¨éšªåˆ†æ", "æ±ºç­–æ”¯æ´"],
                            "background": "æœˆæŸ±ä¹™é…‰æ³‰ä¸­æ°´ï¼Œå°‡æ˜Ÿåå‘½ï¼Œå…·å‚™æ•éŠ³çš„æ´å¯ŸåŠ›å’Œæˆ°ç•¥æ€ç¶­ã€‚å–„æ–¼åˆ†æå±€å‹¢ï¼Œåˆ¶å®šé•·é è¨ˆåŠƒã€‚"
                        },
                        {
                            "pillar": "æ—¥æŸ±",
                            "role": "å‰¯å°‡",
                            "description": "åŸ·è¡ŒåŠ›é‡",
                            "element": "æˆŠå¯…",
                            "attributes": {
                                "åŠ›é‡": 4,
                                "åŸ·è¡Œ": 4,
                                "å …éŸŒ": 3
                            },
                            "skills": ["å¼·åŠ›åŸ·è¡Œ", "ä¸å±ˆæ„å¿—", "çªç ´éšœç¤™"],
                            "background": "æ—¥æŸ±æˆŠå¯…åŸç‰†åœŸï¼Œæ—¥åé•·ç”Ÿï¼Œå¤©å¾·è²´äººåŠ æŒã€‚å…·å‚™å …å¯¦çš„åŸ·è¡Œèƒ½åŠ›å’ŒæŒä¹…çš„è€åŠ›ã€‚"
                        },
                        {
                            "pillar": "æ™‚æŸ±",
                            "role": "å£«å…µ",
                            "description": "åŸºç¤æ”¯æ´",
                            "element": "å£¬æˆŒ",
                            "attributes": {
                                "é«”è³ª": 3,
                                "æ”¯æ´": 3,
                                "è²¡é‹": 3
                            },
                            "skills": ["è³‡æºç®¡ç†", "å¾Œå‹¤æ”¯æ´", "è²¡å¯Œç©ç´¯"],
                            "background": "æ™‚æŸ±å£¬æˆŒå¤§æµ·æ°´ï¼Œåè²¡é€å¹¹ï¼Œå¤©æ¥µè²´äººå®ˆè­·ã€‚æ“…é•·è³‡æºèª¿é…å’Œè²¡å¯Œç®¡ç†ã€‚"
                        }
                    ],
                    "team_stats": {
                        "ç¸½æˆ°åŠ›": 85,
                        "å‰µæ„æŒ‡æ•¸": 92,
                        "è²¡é‹æŒ‡æ•¸": 78,
                        "äººè„ˆæŒ‡æ•¸": 88,
                        "åŸ·è¡ŒåŠ›": 82,
                        "é ˜å°åŠ›": 80
                    }
                },
                "life_strategy": {
                    "äº‹æ¥­ç™¼å±•": {
                        "å„ªå‹¢é ˜åŸŸ": ["å‰µæ„ç”¢æ¥­", "æ•™è‚²åŸ¹è¨“", "è«®è©¢æœå‹™", "æ–‡åŒ–å‚³åª’"],
                        "ç™¼å±•å»ºè­°": [
                            "ç™¼æ®å‚·å®˜å‰µæ„å„ªå‹¢ï¼Œåœ¨å‰µæ–°é ˜åŸŸå¤§å±•èº«æ‰‹",
                            "å–„ç”¨è²´äººé‹ï¼Œå»ºç«‹å»£æ³›çš„äººè„ˆé—œä¿‚",
                            "ç©©æ­¥ç¶“ç‡Ÿï¼Œé¿å…éåº¦å†’éšªæŠ•è³‡",
                            "å¯è€ƒæ…®åˆå¤¥äº‹æ¥­ï¼Œç™¼æ®åœ˜éšŠå”ä½œå„ªå‹¢"
                        ],
                        "æ³¨æ„äº‹é …": [
                            "æ—¥ä¸»åå¼±ï¼Œéœ€è¦åœ˜éšŠæ”¯æŒï¼Œé¿å…å–®æ‰“ç¨é¬¥",
                            "è²¡æ˜Ÿè¼ƒé‡ï¼Œç†è²¡è¦è¬¹æ…ï¼Œé¿å…éåº¦æ¶ˆè²»",
                            "å‚·å®˜æ—ºç››ï¼Œè¡¨é”æ™‚è¦æ³¨æ„åˆ†å¯¸"
                        ]
                    },
                    "äººéš›é—œä¿‚": {
                        "äººç·£ç‰¹é»": "å¤©ç”Ÿå…·å‚™è²´äººé‹ï¼Œå®¹æ˜“å¾—åˆ°ä»–äººå¹«åŠ©",
                        "ç¤¾äº¤å»ºè­°": [
                            "å¤šåƒåŠ æ–‡åŒ–è—è¡“æ´»å‹•ï¼Œæ“´å±•äººè„ˆåœˆ",
                            "å–„ç”¨å‚·å®˜çš„è¡¨é”èƒ½åŠ›ï¼Œæˆç‚ºæ„è¦‹é ˜è¢–",
                            "å»ºç«‹é•·æœŸç©©å®šçš„åˆä½œé—œä¿‚"
                        ],
                        "æ„Ÿæƒ…å©šå§»": [
                            "åè²¡é€å¹¹ï¼Œæ„Ÿæƒ…æ©Ÿæœƒå¤šä½†è¦å°ˆä¸€",
                            "é©åˆæ‰¾ç«åœŸäº”è¡Œçš„ä¼´ä¾¶ï¼Œäº’ç›¸æ‰¶æŒ",
                            "æˆ€æ„›ä¸­è¦æ§åˆ¶å‚·å®˜çš„æŒ‘å‰”æ€§æ ¼"
                        ]
                    },
                    "å¥åº·é¤Šç”Ÿ": {
                        "é«”è³ªç‰¹é»": "æˆŠåœŸæ—¥ä¸»åå¯…æœ¨ï¼Œè„¾èƒƒåŠŸèƒ½éœ€è¦æ³¨æ„",
                        "é¤Šç”Ÿå»ºè­°": [
                            "å¤šæ¥è§¸ç«æ€§èƒ½é‡ï¼Œå¦‚é™½å…‰ã€æº«æ³‰",
                            "é£²é£Ÿä»¥æº«ç†±ç‚ºä¸»ï¼Œé¿å…éå¯’é£Ÿç‰©",
                            "é©åˆå—æ–¹æˆ–æº«æš–åœ°å€å±…ä½å·¥ä½œ",
                            "ä¿æŒè¦å¾‹ä½œæ¯ï¼Œé¿å…éåº¦å‹ç´¯"
                        ]
                    },
                    "è²¡å¯Œç®¡ç†": {
                        "è²¡é‹ç‰¹é»": "åè²¡æ­£è²¡ä¸¦ç¾ï¼Œè²¡é‹ä¸éŒ¯ä½†è¦è¬¹æ…ç®¡ç†",
                        "ç†è²¡å»ºè­°": [
                            "åˆ†æ•£æŠ•è³‡ï¼Œä¸è¦æŠŠé›è›‹æ”¾åœ¨åŒä¸€å€‹ç±ƒå­",
                            "é¿å…è¡å‹•æ€§æ¶ˆè²»ï¼Œåˆ¶å®šé ç®—è¨ˆåŠƒ",
                            "å¯è€ƒæ…®æ–‡åŒ–å‰µæ„ç›¸é—œæŠ•è³‡",
                            "å»ºç«‹æ‡‰æ€¥åŸºé‡‘ï¼Œæ‡‰å°çªç™¼ç‹€æ³"
                        ]
                    }
                }
            },

            // è»åœ˜è½‰åŒ–å°ç…§è¡¨
            legionMapping: {
                "å¹´æŸ±": {
                    "role": "ä¸»å°‡",
                    "legion": "å¤–äº¤è»åœ˜",
                    "function": "çµ±ç±Œå¤§å±€ã€å»ºç«‹è¯ç›Ÿã€ç²å–å¤–æ´",
                    "strategy": "åˆ©ç”¨è²´äººé‹å»ºç«‹å»£æ³›è¯ç›Ÿï¼Œåœ¨é—œéµæ™‚åˆ»ç²å¾—é‡è¦æ”¯æŒ"
                },
                "æœˆæŸ±": {
                    "role": "è»å¸«", 
                    "legion": "æƒ…å ±è»åœ˜",
                    "function": "æƒ…å ±æ”¶é›†ã€é¢¨éšªè©•ä¼°ã€æˆ°è¡“åˆ¶å®š",
                    "strategy": "æ·±åº¦åˆ†æå±€å‹¢ï¼Œåˆ¶å®šå‘¨å¯†è¨ˆåŠƒï¼Œé åˆ¤å°æ‰‹å‹•å‘"
                },
                "æ—¥æŸ±": {
                    "role": "å‰¯å°‡",
                    "legion": "é‡è£è»åœ˜", 
                    "function": "æ­£é¢çªç ´ã€å …å®ˆé™£åœ°ã€åŸ·è¡Œè¨ˆåŠƒ",
                    "strategy": "æ‰¿æ“”ä¸»è¦åŸ·è¡Œä»»å‹™ï¼Œåœ¨é—œéµæˆ°å½¹ä¸­ç™¼æ®æ±ºå®šæ€§ä½œç”¨"
                },
                "æ™‚æŸ±": {
                    "role": "å£«å…µçµ±é ˜",
                    "legion": "å¾Œå‹¤è»åœ˜",
                    "function": "è³‡æºèª¿é…ã€è²¡å‹™ç®¡ç†ã€æ©Ÿæœƒæ•ç²", 
                    "strategy": "ç¢ºä¿å……è¶³è£œçµ¦ï¼Œåœ¨é©ç•¶æ™‚æ©ŸæŠ•å…¥è³‡æºç²å–æœ€å¤§æ”¶ç›Š"
                }
            }
        };

        // å…¨å±€è®Šé‡
        let currentResult = null;

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            initTabs();
        });

        // å‰µå»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 100;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // åˆå§‹åŒ–æ¨™ç±¤
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });
        }

        // åˆ‡æ›æ¨™ç±¤
        function switchTab(tabName) {
            // æ›´æ–°æ¨™ç±¤ç‹€æ…‹
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // æ›´æ–°å…§å®¹é¡¯ç¤º
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`${tabName}-content`).classList.remove('hidden');
        }

        // è¼‰å…¥ç¯„ä¾‹
        function loadExample() {
            document.getElementById('name').value = 'é»˜é»˜è¶…';
            document.getElementById('year').value = '1985';
            document.getElementById('month').value = '10';
            document.getElementById('day').value = '6';
            document.getElementById('hour').value = '19';
            document.getElementById('minute').value = '30';
            document.getElementById('late-son').checked = true;
        }

        // è¨ˆç®—å…«å­—
        function calculateBazi() {
            const name = document.getElementById('name').value;
            const year = parseInt(document.getElementById('year').value);
            const month = parseInt(document.getElementById('month').value);
            const day = parseInt(document.getElementById('day').value);
            const hour = parseInt(document.getElementById('hour').value);
            const minute = parseInt(document.getElementById('minute').value) || 0;

            if (!name || !year || !month || !day || hour === null) {
                alert('è«‹å¡«å¯«å®Œæ•´çš„å‡ºç”Ÿè³‡æ–™');
                return;
            }

            // ä½¿ç”¨è³‡æ–™åº«ä¸­çš„ç¯„ä¾‹æ•¸æ“šï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­é€™è£¡æœƒæ˜¯çœŸæ­£çš„è¨ˆç®—é‚è¼¯ï¼‰
            if (year === 1985 && month === 10 && day === 6 && hour === 19) {
                currentResult = DATABASE.sampleData;
                currentResult.basic_info.å§“å = name;
                currentResult.character_team.user_name = name;
            } else {
                // å°æ–¼å…¶ä»–æ—¥æœŸï¼Œç”ŸæˆåŸºæœ¬çš„çµæœçµæ§‹
                currentResult = generateBasicResult(name, year, month, day, hour, minute);
            }
            
            displayResults();
            switchTab('team');
        }

        // ç”ŸæˆåŸºæœ¬çµæœï¼ˆç°¡åŒ–ç‰ˆï¼‰
        function generateBasicResult(name, year, month, day, hour, minute) {
            return {
                basic_info: {
                    å§“å: name,
                    é™½æ›†: `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')} ${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:00`
                },
                character_team: {
                    user_name: name,
                    birth_info: `${year}å¹´${month}æœˆ${day}æ—¥${hour}æ™‚`,
                    main_characters: [
                        {
                            pillar: "å¹´æŸ±",
                            role: "ä¸»å°‡",
                            description: "é ˜å°çµ±å¾¡",
                            element: "å¾…è¨ˆç®—",
                            attributes: { é­…åŠ›: 3, çµ±å¾¡: 3, äººè„ˆ: 2 },
                            skills: ["ç¤¾äº¤é”äºº", "è²´äººç›¸åŠ©", "åœ˜éšŠå‡èš"],
                            background: "å¹´æŸ±ä»£è¡¨å®¶æ—å‚³æ‰¿èˆ‡æ—©å¹´ç’°å¢ƒï¼Œå½±éŸ¿ä½ çš„é ˜å°é¢¨æ ¼èˆ‡äººè„ˆè³‡æºã€‚"
                        },
                        {
                            pillar: "æœˆæŸ±", 
                            role: "è»å¸«",
                            description: "æ™ºè¬€ç­–ç•¥",
                            element: "å¾…è¨ˆç®—",
                            attributes: { æ™ºåŠ›: 3, ç­–ç•¥: 3, åˆ†æ: 2 },
                            skills: ["ç­–ç•¥åˆ¶å®š", "é¢¨éšªåˆ†æ", "æ±ºç­–æ”¯æ´"],
                            background: "æœˆæŸ±ä»£è¡¨æˆé•·ç’°å¢ƒèˆ‡å­¸ç¿’èƒ½åŠ›ï¼Œæ±ºå®šä½ çš„æ€ç¶­æ¨¡å¼èˆ‡ç­–ç•¥åˆ¶å®šèƒ½åŠ›ã€‚"
                        },
                        {
                            pillar: "æ—¥æŸ±",
                            role: "å‰¯å°‡", 
                            description: "åŸ·è¡ŒåŠ›é‡",
                            element: "å¾…è¨ˆç®—",
                            attributes: { åŠ›é‡: 4, åŸ·è¡Œ: 4, å …éŸŒ: 3 },
                            skills: ["å¼·åŠ›åŸ·è¡Œ", "ä¸å±ˆæ„å¿—", "çªç ´éšœç¤™"],
                            background: "æ—¥æŸ±ä»£è¡¨æ ¸å¿ƒè‡ªæˆ‘èˆ‡åŸ·è¡Œèƒ½åŠ›ï¼Œæ˜¯ä½ æœ€é‡è¦çš„åŠ›é‡ä¾†æºã€‚"
                        },
                        {
                            pillar: "æ™‚æŸ±",
                            role: "å£«å…µ",
                            description: "åŸºç¤æ”¯æ´", 
                            element: "å¾…è¨ˆç®—",
                            attributes: { é«”è³ª: 3, æ”¯æ´: 3, è²¡é‹: 3 },
                            skills: ["è³‡æºç®¡ç†", "å¾Œå‹¤æ”¯æ´", "è²¡å¯Œç©ç´¯"],
                            background: "æ™‚æŸ±ä»£è¡¨æœªä¾†ç™¼å±•èˆ‡å­å¥³é‹ï¼Œå½±éŸ¿ä½ çš„å¾ŒçºŒç™¼å±•æ½›åŠ›ã€‚"
                        }
                    ],
                    team_stats: {
                        ç¸½æˆ°åŠ›: 80,
                        å‰µæ„æŒ‡æ•¸: 75,
                        è²¡é‹æŒ‡æ•¸: 70,
                        äººè„ˆæŒ‡æ•¸: 75,
                        åŸ·è¡ŒåŠ›: 80,
                        é ˜å°åŠ›: 75
                    }
                },
                life_strategy: {
                    äº‹æ¥­ç™¼å±•: {
                        å„ªå‹¢é ˜åŸŸ: ["å¾…åˆ†æ"],
                        ç™¼å±•å»ºè­°: ["è«‹ä½¿ç”¨å®Œæ•´çš„å…«å­—è¨ˆç®—ç²å¾—è©³ç´°å»ºè­°"],
                        æ³¨æ„äº‹é …: ["å»ºè­°é€²è¡Œå®Œæ•´çš„å‘½ç†åˆ†æ"]
                    }
                }
            };
        }

        // é¡¯ç¤ºçµæœ
        function displayResults() {
            if (!currentResult) return;

            displayTeam();
            displayStrategy();
            displayAnalysis();
        }

        // é¡¯ç¤ºè»åœ˜
        function displayTeam() {
            const container = document.getElementById('team-display');
            const team = currentResult.character_team;
            
            let html = `
                <div class="character-card">
                    <div class="character-header">
                        <div class="character-title">ğŸ‘‘ ${team.user_name} çš„å‘½é‹è»åœ˜</div>
                        <div class="character-role">${team.birth_info}</div>
                    </div>
                    
                    <div class="team-stats">
                        ${Object.entries(team.team_stats).map(([key, value]) => `
                            <div class="stat-item">
                                <div class="stat-name">${key}</div>
                                <div class="stat-value">${value}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // é¡¯ç¤ºä¸»è¦è§’è‰²
            team.main_characters.forEach(character => {
                const mapping = DATABASE.legionMapping[character.pillar];
                html += `
                    <div class="character-card">
                        <div class="character-header">
                            <div class="character-title">${character.pillar} - ${character.element}</div>
                            <div class="character-role">${character.role}</div>
                        </div>
                        
                        <div class="character-details">
                            <div class="detail-section">
                                <div class="detail-title">ğŸ¯ è§’è‰²å±¬æ€§</div>
                                <div class="attributes-grid">
                                    ${Object.entries(character.attributes).map(([key, value]) => `
                                        <div class="attribute-item">
                                            <div class="attribute-name">${key}</div>
                                            <div class="attribute-value">${value}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <div class="detail-title">âš”ï¸ å°ˆç²¾æŠ€èƒ½</div>
                                <div class="skills-list">
                                    ${character.skills.map(skill => `
                                        <span class="skill-tag">${skill}</span>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        
                        <div class="story-section">
                            <div class="story-title">ğŸ”® å‘½ç†è©³æƒ…</div>
                            <div class="story-content">
                                <strong>å¤©å¹²åç¥ï¼š</strong>${currentResult.bazi_details && currentResult.bazi_details[character.pillar] ? currentResult.bazi_details[character.pillar].åç¥ : 'å¾…è¨ˆç®—'}<br>
                                ${currentResult.bazi_details && currentResult.bazi_details[character.pillar] && currentResult.bazi_details[character.pillar].è—å¹²åç¥ ? 
                                    `<strong>è—å¹²åç¥ï¼š</strong>${currentResult.bazi_details[character.pillar].è—å¹²åç¥.join('ã€')}<br>` : ''}
                                ${currentResult.bazi_details && currentResult.bazi_details[character.pillar] ? 
                                    `<strong>å®Œæ•´åç¥ï¼š</strong>${[currentResult.bazi_details[character.pillar].åç¥, ...(currentResult.bazi_details[character.pillar].è—å¹²åç¥ || [])].join('ã€')}<br>` : ''}
                                ${currentResult.bazi_details && currentResult.bazi_details[character.pillar] && currentResult.bazi_details[character.pillar].ç¥ç… ? 
                                    `<strong>ç¥ç…ï¼š</strong>${currentResult.bazi_details[character.pillar].ç¥ç….join('ã€')}<br>` : ''}
                                ${currentResult.bazi_details && currentResult.bazi_details[character.pillar] ? 
                                    `<strong>ç´éŸ³ï¼š</strong>${currentResult.bazi_details[character.pillar].ç´éŸ³}` : ''}
                            </div>
                        </div>
                        
                        <div class="story-section">
                            <div class="story-title">ğŸ“– è§’è‰²èƒŒæ™¯</div>
                            <div class="story-content">${character.background}</div>
                        </div>
                        
                        ${mapping ? `
                            <div class="story-section">
                                <div class="story-title">ğŸ¯ æˆ°ç•¥è·èƒ½</div>
                                <div class="story-content">
                                    <strong>è»åœ˜é¡å‹ï¼š</strong>${mapping.legion}<br>
                                    <strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong>${mapping.function}<br>
                                    <strong>ä½œæˆ°ç­–ç•¥ï¼š</strong>${mapping.strategy}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // é¡¯ç¤ºæˆ°ç•¥
        function displayStrategy() {
            const container = document.getElementById('strategy-display');
            const strategy = currentResult.life_strategy;
            
            let html = '';
            
            Object.entries(strategy).forEach(([category, data]) => {
                html += `
                    <div class="character-card">
                        <div class="character-header">
                            <div class="character-title">ğŸ“‹ ${category}</div>
                        </div>
                        
                        <div class="character-details">
                `;
                
                Object.entries(data).forEach(([key, value]) => {
                    html += `
                        <div class="detail-section">
                            <div class="detail-title">${key}</div>
                            <div class="story-content">
                    `;
                    
                    if (Array.isArray(value)) {
                        html += `
                            <ul style="margin-left: 20px;">
                                ${value.map(item => `<li style="margin-bottom: 8px;">${item}</li>`).join('')}
                            </ul>
                        `;
                    } else {
                        html += value;
                    }
                    
                    html += `
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // é¡¯ç¤ºåˆ†æ
        function displayAnalysis() {
            const container = document.getElementById('analysis-display');
            const basic = currentResult.basic_info;
            const bazi = currentResult.bazi_details;
            
            let html = `
                <div class="character-card">
                    <div class="character-header">
                        <div class="character-title">ğŸ“Š åŸºæœ¬è³‡è¨Š</div>
                    </div>
                    
                    <div class="character-details">
                        <div class="detail-section">
                            <div class="detail-title">å€‹äººè³‡æ–™</div>
                            <div class="story-content">
                                ${Object.entries(basic).map(([key, value]) => `
                                    <strong>${key}ï¼š</strong>${value}<br>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            if (bazi) {
                html += `
                    <div class="character-card">
                        <div class="character-header">
                            <div class="character-title">ğŸ”® å››æŸ±è©³æƒ…</div>
                        </div>
                        
                        <div class="character-details">
                `;
                
                Object.entries(bazi).forEach(([pillar, data]) => {
                    html += `
                        <div class="detail-section">
                            <div class="detail-title">${pillar} - ${data.å¤©å¹²}${data.åœ°æ”¯}</div>
                            <div class="story-content">
                                <strong>äº”è¡Œï¼š</strong>${data.äº”è¡Œ}<br>
                                <strong>ç´éŸ³ï¼š</strong>${data.ç´éŸ³}<br>
                                <strong>å¤©å¹²åç¥ï¼š</strong>${data.åç¥}<br>
                                ${data.è—å¹²åç¥ ? `<strong>è—å¹²åç¥ï¼š</strong>${data.è—å¹²åç¥.join('ã€')}<br>` : ''}
                                <strong>å®Œæ•´åç¥ï¼š</strong>${[data.åç¥, ...(data.è—å¹²åç¥ || [])].join('ã€')}<br>
                                <strong>ç¥ç…ï¼š</strong>${data.ç¥ç… ? data.ç¥ç….join('ã€') : 'ç„¡'}<br>
                                <strong>è—å¹²ï¼š</strong>${data.è—å¹² ? data.è—å¹².join('ã€') : 'ç„¡'}
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            }

            container.innerHTML = html;
        }
    </script>
</body>
</html>

